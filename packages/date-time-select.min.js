var dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,k=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,h=/[^-+\dA-Z]/g,b=function(a,b){a=""+a;for(b=b||2;a.length<b;)a="0"+a;return a};return function(a,d,i){var f=dateFormat;1==arguments.length&&"[object String]"==Object.prototype.toString.call(a)&&!/\d/.test(a)&&(d=a,a=void 0);a=a?new Date(a):new Date;if(isNaN(a))throw SyntaxError("invalid date");
d=""+(f.masks[d]||d||f.masks["default"]);"UTC:"==d.slice(0,4)&&(d=d.slice(4),i=!0);var c=i?"getUTC":"get",j=a[c+"Date"](),n=a[c+"Day"](),l=a[c+"Month"](),o=a[c+"FullYear"](),g=a[c+"Hours"](),p=a[c+"Minutes"](),q=a[c+"Seconds"](),c=a[c+"Milliseconds"](),m=i?0:a.getTimezoneOffset(),r={d:j,dd:b(j),ddd:f.i18n.dayNames[n],dddd:f.i18n.dayNames[n+7],m:l+1,mm:b(l+1),mmm:f.i18n.monthNames[l],mmmm:f.i18n.monthNames[l+12],yy:(""+o).slice(2),yyyy:o,h:g%12||12,hh:b(g%12||12),H:g,HH:b(g),M:p,MM:b(p),s:q,ss:b(q),
l:b(c,3),L:b(99<c?Math.round(c/10):c),t:12>g?"a":"p",tt:12>g?"am":"pm",T:12>g?"A":"P",TT:12>g?"AM":"PM",Z:i?"UTC":((""+a).match(k)||[""]).pop().replace(h,""),o:(0<m?"-":"+")+b(100*Math.floor(Math.abs(m)/60)+Math.abs(m)%60,4),S:["th","st","nd","rd"][3<j%10?0:(10!=j%100-j%10)*j%10]};return d.replace(e,function(a){return a in r?r[a]:a.slice(1,a.length-1)})}}();
dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),monthNames:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,January,February,March,April,May,June,July,August,September,October,November,December".split(",")};
Date.prototype.format=function(e,k){return dateFormat(this,e,k)};(function(e){if(e){var k=function(b,a){b.find("select option").attr("selected",null);var d=b.find('select option[value="'+a+'"]');d.attr("selected","selected");b.find(".ui-button-text").html(d.html());return b},h=function(b){if(b){var a=b.find("select").data("format").replace(/"/g,"");k(b,(new Date).format(a))}return b};e.fn.dateTimeSelect=function(){return this.each(function(){var b=e(this);if(!b.data("dateTimeSelect")){b.data("dateTimeSelect",{enabled:!0});var a=e(this).closest(".form-field-date-time-select-menu"),
d=a.find('.form-field[class$="_year"]'),i=a.find('.form-field[class$="_month"]'),f=a.find('.form-field[class$="_day"]');a.find('.form-field[class$="_year"], .form-field[class$="_month"]').change(function(){selectedYear=d.find(".ui-button-text").html();var a=i.find(".ui-button-text").html();selectedMonth=e.inArray(a,",January,February,March,April,May,June,July,August,September,October,November,December".split(","));var a=(new Date(selectedYear,selectedMonth,0)).getDate(),b=f.find("select");selectedDay=
f.find(".ui-button-text").html();f.find("select option").remove();for(dayIndex=1;dayIndex<a;dayIndex++)f.find("select").append('<option value="'+dayIndex+'">'+dayIndex+"</option>");selectedDay>a&&(selectedDay=a);b.selectMenu();k(f,selectedDay)});var c=a.find('.form-field[class$="_hour"]'),j=a.find('.form-field[class$="_minute"]');b.click(function(a){a.preventDefault();h(d,"year").find("select").trigger("click");h(i,"month").find("select").trigger("click");h(f,"day").find("select").trigger("click");
h(c,"hour").find("select").trigger("click");h(j,"minute").find("select").trigger("click");i.find("select").trigger("click")});e(this).closest("form").submit(function(){var b=function(a){return a.find("select option[selected]").val()},e=b(d),h=b(i),g=b(f),k=b(c),b=b(j),e=Math.round((new Date(e,h-1,g,k,b)).getTime()/1E3);a.find('input[type="hidden"]').val(e);return!0})}})}}})(jQuery);
